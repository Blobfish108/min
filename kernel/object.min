Object.vtable.add_method(:define_method): name, implementation |
  receiver.vtable.add_method name, implementation.bind(receiver)

Object.define_method(:new):
  obj = vtable.allocate
  obj.define_method :class, { Object }
  obj

Object.define_method(:constant_set): name, value |
  eval(name.to_s + " = value")
  value

Object.define_method(:constant_get): name |
  eval(name.to_s)
